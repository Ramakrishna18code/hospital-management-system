<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management - Reports</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="nav-menu">
        <a href="dashboard.html">Dashboard</a>
        <a href="patients.html">Patients</a>
        <a href="appointments.html">Appointments</a>
        <a href="doctors.html">Doctors</a>
        <a href="inventory.html">Inventory</a>
        <a href="reports.html">Reports</a>
    </nav>

    <div class="container">
        <div class="welcome-section">
            <h1>Reports & Analytics</h1>
            <p>View detailed reports and statistics</p>
        </div>

        <div class="reports-controls">
            <div class="date-range-picker">
                <label>Date Range:</label>
                <select id="dateRange" onchange="updateReports()">
                    <option value="7">Last 7 Days</option>
                    <option value="30" selected>Last 30 Days</option>
                    <option value="90">Last 3 Months</option>
                    <option value="365">Last Year</option>
                    <option value="custom">Custom Range</option>
                </select>
            </div>
            <div class="export-options">
                <button class="secondary-button" onclick="exportReport('pdf')">Export PDF</button>
                <button class="secondary-button" onclick="exportReport('excel')">Export Excel</button>
            </div>
        </div>

        <div class="reports-grid">
            <!-- Financial Overview -->
            <div class="report-section card">
                <h3>Financial Overview</h3>
                <div class="financial-stats">
                    <div class="stat-item">
                        <span class="stat-label">Total Revenue</span>
                        <span class="stat-value">$125,450</span>
                        <span class="trend positive">‚Üë 8.3%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Expenses</span>
                        <span class="stat-value">$45,280</span>
                        <span class="trend negative">‚Üë 2.1%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Net Profit</span>
                        <span class="stat-value">$80,170</span>
                        <span class="trend positive">‚Üë 12.5%</span>
                    </div>
                </div>
                <canvas id="revenueChart"></canvas>
            </div>

            <!-- Patient Statistics -->
            <div class="report-section card">
                <h3>Patient Statistics</h3>
                <div class="chart-container">
                    <canvas id="patientChart"></canvas>
                </div>
                <div class="stats-summary">
                    <div class="summary-item">
                        <span class="label">New Patients</span>
                        <span class="value">124</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Return Visits</span>
                        <span class="value">312</span>
                    </div>
                    <div class="summary-item">
                        <span class="label">Avg. Wait Time</span>
                        <span class="value">18 min</span>
                    </div>
                </div>
            </div>

            <!-- Department Performance -->
            <div class="report-section card">
                <h3>Department Performance</h3>
                <canvas id="departmentChart"></canvas>
                <div class="department-stats">
                    <div class="dept-item">
                        <span class="dept-name">Cardiology</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 85%"></div>
                        </div>
                        <span class="dept-value">85%</span>
                    </div>
                    <div class="dept-item">
                        <span class="dept-name">Pediatrics</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 78%"></div>
                        </div>
                        <span class="dept-value">78%</span>
                    </div>
                    <div class="dept-item">
                        <span class="dept-name">Orthopedics</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 92%"></div>
                        </div>
                        <span class="dept-value">92%</span>
                    </div>
                </div>
            </div>

            <!-- Inventory Status -->
            <div class="report-section card">
                <h3>Inventory Status</h3>
                <div class="inventory-summary">
                    <canvas id="inventoryChart"></canvas>
                </div>
                <div class="inventory-alerts">
                    <h4>Critical Items</h4>
                    <ul class="alert-list">
                        <li class="alert-item">
                            <span class="item-name">Surgical Masks</span>
                            <span class="stock-level warning">Low Stock</span>
                        </li>
                        <li class="alert-item">
                            <span class="item-name">Blood Pressure Monitors</span>
                            <span class="stock-level critical">Critical</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Detailed Reports Table -->
        <div class="detailed-reports card">
            <h3>Detailed Reports</h3>
            <table class="reports-table">
                <thead>
                    <tr>
                        <th>Report Name</th>
                        <th>Period</th>
                        <th>Status</th>
                        <th>Last Updated</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Monthly Financial Summary</td>
                        <td>Sep 2025</td>
                        <td><span class="status completed">Completed</span></td>
                        <td>Sep 28, 2025</td>
                        <td>
                            <button onclick="viewReport(1)" class="icon-button">üëÅÔ∏è</button>
                            <button onclick="downloadReport(1)" class="icon-button">‚¨áÔ∏è</button>
                        </td>
                    </tr>
                    <tr>
                        <td>Patient Satisfaction Survey</td>
                        <td>Q3 2025</td>
                        <td><span class="status pending">In Progress</span></td>
                        <td>Sep 25, 2025</td>
                        <td>
                            <button onclick="viewReport(2)" class="icon-button">üëÅÔ∏è</button>
                            <button onclick="downloadReport(2)" class="icon-button">‚¨áÔ∏è</button>
                        </td>
                    </tr>
                    <tr>
                        <td>Department Performance Review</td>
                        <td>Q3 2025</td>
                        <td><span class="status completed">Completed</span></td>
                        <td>Sep 20, 2025</td>
                        <td>
                            <button onclick="viewReport(3)" class="icon-button">üëÅÔ∏è</button>
                            <button onclick="downloadReport(3)" class="icon-button">‚¨áÔ∏è</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <style>
        .reports-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1.5rem 0;
        }

        .date-range-picker {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .date-range-picker select {
            padding: 0.5rem;
            border: 1px solid #d8dde6;
            border-radius: 4px;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .report-section {
            padding: 1.5rem;
        }

        .financial-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .stat-label {
            display: block;
            font-size: 0.875rem;
            color: #706e6b;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            display: block;
            font-size: 1.5rem;
            font-weight: bold;
            color: #16325c;
            margin-bottom: 0.25rem;
        }

        .chart-container {
            height: 300px;
            margin-bottom: 1rem;
        }

        .stats-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .summary-item {
            text-align: center;
        }

        .summary-item .label {
            display: block;
            font-size: 0.875rem;
            color: #706e6b;
            margin-bottom: 0.25rem;
        }

        .summary-item .value {
            font-size: 1.25rem;
            font-weight: bold;
            color: #16325c;
        }

        .department-stats {
            margin-top: 1rem;
        }

        .dept-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .dept-name {
            width: 100px;
            font-size: 0.875rem;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: #ecebea;
            border-radius: 4px;
            margin: 0 1rem;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: #1589ee;
            border-radius: 4px;
        }

        .dept-value {
            width: 50px;
            font-size: 0.875rem;
            text-align: right;
        }

        .inventory-alerts {
            margin-top: 1rem;
        }

        .alert-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .alert-list .alert-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            border-bottom: 1px solid #ecebea;
        }

        .stock-level {
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
        }

        .stock-level.warning {
            background: #fff7e6;
            color: #8c6d2c;
        }

        .stock-level.critical {
            background: #fae5e5;
            color: #c23934;
        }

        .reports-table {
            width: 100%;
            border-collapse: collapse;
        }

        .reports-table th,
        .reports-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #ecebea;
        }

        .reports-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
        }

        .status.completed {
            background: #ebf7e6;
            color: #2e844a;
        }

        .status.pending {
            background: #fff7e6;
            color: #8c6d2c;
        }
    </style>

    <script>
        // Initialize Charts
        function initializeCharts() {
            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Revenue',
                        data: [65000, 72000, 68000, 78000, 82000, 89000],
                        borderColor: '#1589ee',
                        tension: 0.4,
                        fill: true,
                        backgroundColor: 'rgba(21, 137, 238, 0.1)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: value => '$' + value.toLocaleString()
                            }
                        }
                    }
                }
            });

            // Patient Chart
            const patientCtx = document.getElementById('patientChart').getContext('2d');
            new Chart(patientCtx, {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Patient Visits',
                        data: [45, 52, 49, 55, 48, 30, 25],
                        backgroundColor: 'rgba(21, 137, 238, 0.6)',
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Department Chart
            const deptCtx = document.getElementById('departmentChart').getContext('2d');
            new Chart(deptCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Cardiology', 'Pediatrics', 'Orthopedics', 'Others'],
                    datasets: [{
                        data: [35, 25, 20, 20],
                        backgroundColor: [
                            '#1589ee',
                            '#ff9a3c',
                            '#04844b',
                            '#706e6b'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Inventory Chart
            const invCtx = document.getElementById('inventoryChart').getContext('2d');
            new Chart(invCtx, {
                type: 'bar',
                data: {
                    labels: ['Medicines', 'Equipment', 'Supplies', 'Other'],
                    datasets: [{
                        label: 'Stock Value',
                        data: [25000, 35000, 15000, 8000],
                        backgroundColor: 'rgba(21, 137, 238, 0.6)',
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: value => '$' + value.toLocaleString()
                            }
                        }
                    }
                }
            });
        }

        // Update reports based on date range
        function updateReports() {
            const range = document.getElementById('dateRange').value;
            // TODO: Implement report updating logic
            console.log('Updating reports for range:', range);
        }

        // Export functionality
        function exportReport(format) {
            // TODO: Implement export functionality
            alert(`Exporting report in ${format.toUpperCase()} format`);
        }

        // View report details
        function viewReport(reportId) {
            // TODO: Implement report viewing
            console.log('Viewing report:', reportId);
        }

        // Download report
        function downloadReport(reportId) {
            // TODO: Implement report download
            console.log('Downloading report:', reportId);
        }

        // Initialize charts when the page loads
        window.onload = function() {
            initializeCharts();
        };
    </script>
</body>
</html>